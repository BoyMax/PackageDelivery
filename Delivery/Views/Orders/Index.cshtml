@model IEnumerable<Delivery.Models.Orders>

@{
    ViewBag.Title = "我的订单信息";
}
<h2>订单信息</h2>

<p>
    @Html.ActionLink("创建新的订单", "Create")
</p>

<html>
<head>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet">
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
</head>

<body style="background-color:lightgoldenrodyellow">
    <div class="row" style="margin-top:40px">
        @*<div class="col-md-5" style="margin-top:20px">
            <img src="~/Content/5.png" class="img-rounded" style="width:80%;height:100%;">
        </div>*@
        <div class="col-md-6">
            <div id="one" style="overflow-y:scroll;width:1024px;height:300px;border:2px solid rgba(0,0,0,0.3) ;">

                <div style="margin-bottom:5px">
                    <table class="table">
                        <tr>
                            <th style="width:200px">
                                领取地点
                                @*@Html.DisplayNameFor(model => model.PickLocation.PlaceName)*@
                            </th>
                            @*<th>
                                    @Html.DisplayNameFor(model => model.Sender.Account)
                                </th>*@
                            <th style="width:200px">
                                代收地点
                                @*@Html.DisplayNameFor(model => model.ReceiverLocation.PlaceName)*@
                            </th>
                            <th>
                               酬金类型
                            </th>
                            <th>
                                代收人
                                @*@Html.DisplayNameFor(model => model.Receiver.Account)*@
                            </th>
                            <th>
                                状态
                            </th>
                            @*<th>
                                    @Html.DisplayNameFor(model => model.Mark)
                                </th>*@
                            @*<th>
                                    @Html.DisplayNameFor(model => model.Comment)
                                </th>*@
                            <th>
                                @Html.DisplayNameFor(model => model.PublishTime)
                            </th>
                            @*<th>
                                    @Html.DisplayNameFor(model => model.EndTime)
                                </th>*@
                            <th>操作</th>
                        </tr>

                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.PickLocation.PlaceName)
                                </td>
                                @*<td>
                                        @Html.DisplayFor(modelItem => item.Sender.Account)
                                    </td>*@
                                <td>
                                    @if (item.Status == "等待接收")
                                    {
                                        <span>无</span>
                                    }
                                    else if (item.Status == "待选择")
                                    {
                                        <span>无</span>
                                    }
                                    else
                                    {
                                        @Html.DisplayFor(modelItem => item.Receiver.Account)
                                    }
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Reward.Type)
                                </td>
                                <td>
                                    @if (item.Status == "等待接收")
                                    {
                                        <span>无</span>
                                    }
                                    else if (item.Status == "待选择")
                                    {
                                        <button class="btn btn-primary" onClick="delcfm('${ctxPath}/manager/project/delete?id=${vo.id?default()}',this)">选择</button>
                                    }
                                    else
                                    {
                                        @Html.DisplayFor(modelItem => item.Receiver.Account)
                                    }
                                    </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Status)
                                </td>
                                @*<td>
                                        @Html.DisplayFor(modelItem => item.Mark)
                                    </td>*@
                                @*<td>
                                        @Html.DisplayFor(modelItem => item.Comment)
                                    </td>*@
                                <td>
                                    @Html.DisplayFor(modelItem => item.PublishTime)
                                </td>
                                @*<td>
                                        @Html.DisplayFor(modelItem => item.EndTime)
                                    </td>*@
                                <td>
                                    @if (item.Status == "等待接收")
                                    {
                                        @Html.ActionLink("修改", "Edit", new { id = item.ID }) }
                                    else if (item.Status == "待选择")
                                    {
                                        @Html.ActionLink("选择代收人", "Edit", new { id = item.ID }) }
                                    | @Html.ActionLink("详情", "Details", new { id = item.ID }) |
                                    @Html.ActionLink("删除", "Delete", new { id = item.ID })
                                </td>
                            </tr>
                        }

                    </table>



                </div>
            </div>
        </div>
    </div>


    <div class="row" style="margin-top:50px">
        <div id="myCarousel" class="carousel slide">
            <!-- 轮播（Carousel）指标 -->
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
            </ol>
            <!-- 轮播（Carousel）项目 -->
            <div class="carousel-inner">
                <div class="item active">
                    <img src="~/images/2.png" alt="First slide">
                </div>
                <div class="item">
                    <img src="~/images/5.png" alt="Second slide">
                </div>
                <div class="item">
                    <img src="~/images/3.png" alt="Third slide">
                </div>
            </div>
            <!-- 轮播（Carousel）导航 -->
            <a class="carousel-control left" href="#myCarousel"
               data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#myCarousel"
               data-slide="next">&rsaquo;</a>
        </div>
    </div>

    <div class="modal fade" id="two">
        <div class="modal-dialog">
            <div class="modal-content message_align">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                    <h4 class="modal-title">详细信息</h4>
                </div>
                <div class="modal-body">
                    <table class="table">
                        <tbody>
                            <tr class="active">
                                <th>
                                </th>
                                <th>姓名</th>
                                <th>账号</th>
                                <th>手机</th>
                                <th>地址</th>
                            </tr>
                            <tr class="success">
                                <td><input id="1" type="radio" value="小洪" name="rad" onclick="radioclick(this)"></td>
                                <td>小洪</td>
                                <td>10112110108</td>
                                <td>15298764670</td>
                                <td>
                                    华东师范大学本科生公寓6舍
                                </td>
                            </tr>
                        </tbody>
                    </table>

                </div>
                <div class="modal-footer">
                    <input type="hidden" id="url" />
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <a onclick="choice()" class="btn btn-success" data-dismiss="modal">确定</a>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';">
        <a href="#" target="_blank">Package.com@ecnu.edu.cn</a>
    </div>

</body>
</html>

<script>

    var button_id;
    function delcfm(url, obj) {
        button_id = obj.id;
        $('#url').val(url);//给会话中的隐藏属性URL赋值
        $('#two').modal();
    }
   
    function radioclick(obj) {
        if (obj.tag == 1) {
            obj.checked = false;
            obj.tag = 0;
        }
        else {
            obj.checked = true;
            obj.tag = 1;
        }
    }
    function but(obj) {  //给submit绑定点击事件
        button_id = obj.id;
        var b = document.getElementById("two"); //获取透明层
        b.style.display = "block";  //点击提交显示透明层
    }
    function choice() {
        var a;

        var arr = document.getElementsByName("rad");
        for (var i = 0; i < arr.length; i++) {
            if (arr[i].checked) {
                a = arr[i].value;
            }
        }
        var c = document.getElementById("two"); //获取透明层
        c.style.display = "none";  //点击提交显示透明层
        var d = document.getElementById(button_id);
        var td = d.parentNode;
        td.removeChild(d);
        var newtext = document.createTextNode(a);
        var newGraf = document.createElement("p");
        newGraf.appendChild(newtext);

        td.appendChild(newGraf);
    }
</script>